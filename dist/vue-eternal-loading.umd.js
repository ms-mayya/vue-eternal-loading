(function(l,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(l=typeof globalThis<"u"?globalThis:l||self,e(l.TSPro={},l.Vue))})(this,function(l,e){"use strict";function _(t){return t.scrollHeight}function P(t){return t.scrollWidth}function b(t,s){t.scrollTop=t.scrollHeight-s+t.scrollTop}function V(t,s){t.scrollLeft=t.scrollWidth-s+t.scrollLeft}const k=e.createElementVNode("div",{class:"loading"},"Loading...",-1),I=e.createElementVNode("div",{class:"no-more"},"No more.",-1),L=e.createElementVNode("div",{class:"no-results"},"No results.",-1),N=e.createElementVNode("div",{class:"error"},"Error.",-1),T=e.defineComponent({__name:"VueEternalLoading",props:{load:{required:!0,type:Function},isInitial:{required:!1,type:Boolean,default:!0},position:{required:!1,type:String,default:"default"},container:{required:!1,type:Object,default:null},margin:{required:!1,type:String,default:void 0}},emits:["update:isInitial"],setup(t,{emit:s}){const r=t,a=e.ref();let d=e.ref("loading"),n=e.ref(r.isInitial),c=0;function u(){e.nextTick(()=>{var o,i;r.position==="top"?b((o=r.container)!=null?o:document.documentElement,c):r.position==="left"&&V((i=r.container)!=null?i:document.documentElement,c)})}function q(o,i){return o===0?n.value?(y(),"no-results"):(g(),"no-more"):o!==void 0&&i!==void 0&&o<i?(g(),"no-more"):(n.value=!1,u(),m(),"loading")}function g(){n.value=!1,f("no-more"),u()}function y(){n.value=!1,f("no-results"),u()}function F(){n.value=!1,f("error"),u()}function z(){n.value=!0,f("loading"),m()}function h(){f("loading"),m()}function f(o){d.value=o}function E(){a.value&&p.unobserve(a.value)}function m(){a.value&&p.observe(a.value)}function O(){return new IntersectionObserver(([o])=>{var i,S;o.isIntersecting&&(r.position==="top"?c=_((i=r.container)!=null?i:document.documentElement):r.position==="left"&&(c=P((S=r.container)!=null?S:document.documentElement)),E(),r.load({loaded:q,noMore:g,noResults:y,error:F},{isFirstLoad:n.value}))},{root:r.container,threshold:0,rootMargin:r.margin})}let p;return typeof IntersectionObserver<"u"&&e.watchEffect(()=>{p&&E(),p=O(),m()},{flush:"post"}),e.watch(()=>r.isInitial,o=>{o&&z()}),e.watch(n,o=>{o||s("update:isInitial",!1)}),(o,i)=>(e.openBlock(),e.createElementBlock("div",{class:"vue-eternal-loading",ref_key:"rootRef",ref:a},[e.unref(d)==="loading"?e.renderSlot(o.$slots,"loading",e.normalizeProps(e.mergeProps({key:0},{isFirstLoad:e.unref(n)})),()=>[k]):e.unref(d)==="no-more"?e.renderSlot(o.$slots,"no-more",e.normalizeProps(e.mergeProps({key:1},{retry:h})),()=>[I]):e.unref(d)==="no-results"?e.renderSlot(o.$slots,"no-results",e.normalizeProps(e.mergeProps({key:2},{retry:h})),()=>[L]):e.unref(d)==="error"?e.renderSlot(o.$slots,"error",e.normalizeProps(e.mergeProps({key:3},{retry:h})),()=>[N]):e.createCommentVNode("",!0)],512))}});l.VueEternalLoading=T,Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
