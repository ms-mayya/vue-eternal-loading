"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue");function P(r){return r.scrollHeight}function k(r){return r.scrollWidth}function I(r,l){r.scrollTop=r.scrollHeight-l+r.scrollTop}function L(r,l){r.scrollLeft=r.scrollWidth-l+r.scrollLeft}const V=e.createElementVNode("div",{class:"loading"},"Loading...",-1),N=e.createElementVNode("div",{class:"no-more"},"No more.",-1),q=e.createElementVNode("div",{class:"no-results"},"No results.",-1),F=e.createElementVNode("div",{class:"error"},"Error.",-1),z=e.defineComponent({__name:"VueEternalLoading",props:{load:{required:!0,type:Function},isInitial:{required:!1,type:Boolean,default:!0},position:{required:!1,type:String,default:"default"},container:{required:!1,type:Object,default:null},margin:{required:!1,type:String,default:void 0}},emits:["update:isInitial"],setup(r,{emit:l}){const t=r,s=e.ref();let a=e.ref("loading"),n=e.ref(t.isInitial),c=0;function d(){e.nextTick(()=>{var o,i;t.position==="top"?I((o=t.container)!=null?o:document.documentElement,c):t.position==="left"&&L((i=t.container)!=null?i:document.documentElement,c)})}function S(o,i){return o===0?n.value?(g(),"no-results"):(p(),"no-more"):o!==void 0&&i!==void 0&&o<i?(p(),"no-more"):(n.value=!1,d(),f(),"loading")}function p(){n.value=!1,u("no-more"),d()}function g(){n.value=!1,u("no-results"),d()}function y(){n.value=!1,u("error"),d()}function _(){n.value=!0,u("loading"),f()}function v(){u("loading"),f()}function u(o){a.value=o}function h(){s.value&&m.unobserve(s.value)}function f(){s.value&&m.observe(s.value)}function b(){return new IntersectionObserver(([o])=>{var i,E;o.isIntersecting&&(t.position==="top"?c=P((i=t.container)!=null?i:document.documentElement):t.position==="left"&&(c=k((E=t.container)!=null?E:document.documentElement)),h(),t.load({loaded:S,noMore:p,noResults:g,error:y},{isFirstLoad:n.value}))},{root:t.container,threshold:0,rootMargin:t.margin})}let m;return typeof IntersectionObserver<"u"&&e.watchEffect(()=>{m&&h(),m=b(),f()},{flush:"post"}),e.watch(()=>t.isInitial,o=>{o&&_()}),e.watch(n,o=>{o||l("update:isInitial",!1)}),(o,i)=>(e.openBlock(),e.createElementBlock("div",{class:"vue-eternal-loading",ref_key:"rootRef",ref:s},[e.unref(a)==="loading"?e.renderSlot(o.$slots,"loading",e.normalizeProps(e.mergeProps({key:0},{isFirstLoad:e.unref(n)})),()=>[V]):e.unref(a)==="no-more"?e.renderSlot(o.$slots,"no-more",e.normalizeProps(e.mergeProps({key:1},{retry:v})),()=>[N]):e.unref(a)==="no-results"?e.renderSlot(o.$slots,"no-results",e.normalizeProps(e.mergeProps({key:2},{retry:v})),()=>[q]):e.unref(a)==="error"?e.renderSlot(o.$slots,"error",e.normalizeProps(e.mergeProps({key:3},{retry:v})),()=>[F]):e.createCommentVNode("",!0)],512))}});exports.VueEternalLoading=z;
